{"version":3,"sources":["../../src/pages/cart/cart.module.ts","../../src/pages/cart/cart.ts"],"names":[],"mappings":"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","file":"18.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CartPage } from './cart';\nimport {PipesModule} from '../../app/pipes.module';\n\n@NgModule({\n  declarations: [\n    CartPage\n  ],\n  imports: [\n    IonicPageModule.forChild(CartPage),\n    PipesModule\n  ],\n  exports: [\n    CartPage\n  ]\n})\nexport class CartPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.module.ts","import {Component} from '@angular/core';\nimport {NavController,IonicPage, ToastController} from 'ionic-angular';\nimport {ModalController, PopoverController, AlertController, LoadingController} from 'ionic-angular';\nimport {AngularFireAuth} from 'angularfire2/auth';\nimport {AngularFireDatabase, FirebaseObjectObservable} from 'angularfire2/database'\n\n@IonicPage()\n@Component({\n  selector: 'page-cart',\n  templateUrl: 'cart.html'\n})\nexport class CartPage {\n  Cart: any[] = [];\n  public settings: any = {};\n  subTotal: any;\n  GrandTotal: any;\n  otherTaxes = 0.00;\n  setting: FirebaseObjectObservable<any>;\n  noOfItems: any;\n  total: any;\n  coupons: any = [];\n\n\n  constructor(public db:AngularFireDatabase,\n              public navCtrl: NavController,\n              public modalCtrl: ModalController,\n              public popoverCtrl: PopoverController,\n              public alertCtrl: AlertController,\n              public loadingCtrl: LoadingController,\n              public toastCtrl: ToastController) {\n\n    this.Cart = JSON.parse(localStorage.getItem('Cart'));\n    if (this.Cart != null) {\n      this.noOfItems = this.Cart.length;\n      this.callFunction();\n    }\n    this.db.list('/coupons', {\n      query: {\n        orderByChild: 'value'\n      }\n    })\n      .subscribe(response => {\n        this.coupons = response;\n      })\n  }\n\n  couponDiscount: any = 0;\n  deductedPrice:number\n\n  applyCoupon() {\n    var subTotals = this.subTotal;\n    this.deductedPrice= this.decimalFormat(this.couponDiscount / 100 * subTotals);\n    subTotals = subTotals - (this.couponDiscount / 100 * subTotals);\n    //console.log(\"subtotal--\"+this.subTotal);\n    this.GrandTotal = this.decimalFormat(subTotals + this.total);\n    this.createToaster('Coupon applied successfully', '3000');\n\n  }\n\n  createToaster(message, duration) {\n    let toast = this.toastCtrl.create({\n      message: message,\n      duration: duration\n    });\n    toast.present();\n  }\n\n\n  deleteItem(itemId) {\n    for (var i = 0; i <= this.Cart.length - 1; i++) {\n      if (this.Cart[i].item.itemId == itemId) {\n        this.Cart.splice(i, 1);\n        this.callFunction();\n        localStorage.setItem('Cart', JSON.stringify(this.Cart));\n        this.Cart = JSON.parse(localStorage.getItem('Cart'));\n        this.noOfItems = this.noOfItems - 1;\n      }\n    }\n  }\n\n  callFunction() {\n    this.setting = this.db.object('/settings')\n    let subTotal = 0;\n    this.setting.subscribe((data) => {\n      this.settings = data;\n      for (var i = 0; i <= this.Cart.length - 1; i++) {\n        subTotal = subTotal + this.Cart[i].itemTotalPrice;\n      }\n      this.subTotal = subTotal;\n      this.total = (this.subTotal) * this.settings.totalVat / 100;\n      this.GrandTotal = this.decimalFormat(this.subTotal + this.total);\n    })\n  }\n\n  nav() {\n    if (localStorage.getItem('uid') == null) {\n      let alert = this.alertCtrl.create({\n        title: 'SORRY!',\n        subTitle: 'You Have to Login First!',\n        buttons: [\n          {\n            text: 'Ok',\n            handler: data => {\n              this.navCtrl.push(\"LoginPage\");\n            }\n          }\n        ]\n      });\n      alert.present();\n    }\n    else {\n      this.navCtrl.push(\"CheckoutPage\", {\n        grandTotal: this.GrandTotal\n      });\n    }\n  }\n\n  add(data) {\n    if (data.item.itemQunatity < 20) {\n      data.item.itemQunatity = data.item.itemQunatity + 1;\n      for (let i = 0; i <= this.Cart.length - 1; i++) {\n        let ExtotalPrice = 0;\n        let totalPrice = 0;\n        if (this.Cart[i].item.itemId == data.item.itemId) {\n          this.Cart[i].item.itemQunatity = data.item.itemQunatity;\n          for (let j = 0; j <= this.Cart[i].item.extraOptions.length - 1; j++) {\n            ExtotalPrice = ExtotalPrice + this.Cart[i].item.extraOptions[j].value;\n          }\n          if (this.Cart[i].item.price.specialPrice) {\n            totalPrice = ExtotalPrice + this.Cart[i].item.price.specialPrice;\n          } else {\n            totalPrice = ExtotalPrice + this.Cart[i].item.price.value;\n          }\n          this.Cart[i].itemTotalPrice = totalPrice * data.item.itemQunatity;\n        }\n      }\n      localStorage.setItem('Cart', JSON.stringify(this.Cart));\n      this.callFunction();\n    }\n  }\n\n  remove(data) {\n    if (data.item.itemQunatity > 1) {\n      data.item.itemQunatity = data.item.itemQunatity - 1;\n      for (let i = 0; i <= this.Cart.length - 1; i++) {\n        let ExtotalPrice = 0;\n        let totalPrice = 0;\n        if (this.Cart[i].item.itemId == data.item.itemId) {\n          this.Cart[i].item.itemQunatity = data.item.itemQunatity;\n          for (let j = 0; j <= this.Cart[i].item.extraOptions.length - 1; j++) {\n            ExtotalPrice = ExtotalPrice + this.Cart[i].item.extraOptions[j].value;\n          }\n          if (this.Cart[i].item.price.specialPrice) {\n            totalPrice = ExtotalPrice + this.Cart[i].item.price.specialPrice;\n          } else {\n            totalPrice = ExtotalPrice + this.Cart[i].item.price.value;\n          }\n          this.Cart[i].itemTotalPrice = totalPrice * data.item.itemQunatity;\n        }\n      }\n      localStorage.setItem('Cart', JSON.stringify(this.Cart));\n      this.callFunction();\n    }\n  }\n\n    isCart():boolean {\n     if (localStorage.getItem('Cart') == null || this.Cart.length == 0) {\n        return false;\n    }\n       else {\n        return true;\n    }\n}\n\n     gotoHome(){\n         localStorage.removeItem('Cart');\n         this.navCtrl.push(\"HomePage\");\n      }\n\n\n  private decimalFormat(num) {\n    return num.toFixed(2);\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.ts"],"sourceRoot":""}